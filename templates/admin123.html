{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="{% static 'css/admin.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <title>Hello, world!</title>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="container-fluid">
        <div class="container">
            <aside id="sidebar">
                <input type="checkbox" id="toggler">
                <label for="toggler"class="toggle-btn"><i class="bi bi-menu-app"></i>
                    <span>BRAND</span></label>
                    <ul class="sidebar-nav">
                        <li class="sidebar-item">
                            <a href="{% url 'update_profile'}" class="sidebar-link"><i class="bi bi-person-lines-fill"></i><span>Profile</span></a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link"><i class="bi bi-person"></i><span>About</span></a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link"><i class="bi bi-person-rolodex"></i><span>Contact</span></a>
                        </li>
                        <li class="sidebar-item">
                            <a href="{% url 'view_products' %}" class="sidebar-link" id=""><i class="bi bi-pencil-square"></i><span>Products</span></a>
                        </li>
                        <li class="sidebar-item">
                            <a href="{% url 'view_customers' %}" class="sidebar-link"><i class="bi bi-people"></i><span>Customers</span></a>
                        </li>
                        <li class="sidebar-item">
                            <a href="{% url 'view_complaints' %}" class="sidebar-link"><i class="bi bi-chat-dots"></i><span>Complaints</span></a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link"><i class="bi bi-envelope-at"></i><span>Mails</span></a>
                        </li>
                        <li class="sidebar-item">
                            <a href="#" class="sidebar-link"><i class="bi bi-sliders"></i><span>Settings</span></a>
                        </li>
                        <li class="sidebar-item" id="logout" style="margin-bottom: 50vh;">
                            <a href="{% url 'logout' %}"  class="sidebar-link"><i class="bi bi-box-arrow-left"></i><span>logout</span></a>
                        </li>
                    </ul>
            </aside>
            </div>
        <div class="mainhai">
            <div class="container1">
                <div class="search-container">
                    <form action="/search" method="GET">
                        <input type="search" name="query" class="search-input" placeholder="Search..." required>
                        <button type="submit" class="search-button">Search</button>
                    </form>
                </div>
                    <div class="hi1">
                        <!-- Circle with Image Pattern -->
                        <a href=""> <img src="C:/Users/vineeth/Pictures/Screenshots/Screenshot 2024-10-31 104354.png" style="width: 70px;height: 70px; background-color: #3e0a42;margin-top: 10px; margin-bottom: 30px;border-radius: 40px;"><img></a>
        
                    </div>
                
            </div>
            <div class="cont">
                <div class="inside">
                <h1 style="font-size: 50px;">{{procount}}</h1>
                <h3>Products</h3></div>
                <div class="inside"><h1 style="font-size: 50px;">{{odrcount}}</h1>
                    <h3>Orders</h3></div>
                <div class="inside"><h1 style="font-size: 50px;">{{c}}</h1>
                    <h3>Customers</h3></div>
                <div class="inside">
                    <h1 style="font-size: 50px;">{{co}}</h1>
                    <h3>Complaints</h3></div>
            </div>
            
            <div class="cont1">
                <!-- <div class="mailhead">
                    <h1 style="margin-left: 20px; margin-top: 10px;">
                        Mail <span style="margin-left: 10px;"><i class="bi bi-envelope-at"></i></span>
                    </h1>
                </div> -->
                <div class="mail" style="
    width: 100%; 
    background-color: #e0e0e0; 
    padding: 1rem; 
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); 
    height: 400px; 
    overflow-y: scroll;">
    <h4 style="margin-left: 20px;"> Orders 
        <span style="margin-left: 10px;">
            <i class="bi bi-envelope-at"></i>
        </span>
    </h4>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">userName</th>
                <th scope="col">Address</th>
                <th scope="col">Quantity</th>
                <th scope="col">Amount</th>
                <th scope="col">Date</th>
                <th></th>
                <th scope="col">Status</th>
            </tr>
        </thead>
        <tbody>
            {% for x in ordr %}
            <tr>
                <th scope="row">{{ x.id }}</th>
                <td><a href="{% url 'view_customer' x.customer.id %}">{{ x.customer.firstname }}</a></td>
                <td>{{ x.address }}</td>
                <td>{{ x.total_products }}</td>
                <td>{{ x.grand_total }}â‚¹</td>
                <td>{{ x.date_placed }}</td>
                <td><a href="{% url 'order_details' x.id %}">View_details</a></td>
                <td>
                    {{ x.status }}
                    <form method="POST" action="{% url 'order_status' x.id %}">
                        {% csrf_token %}
                        <button type="submit" name="status" value="Confirmed" 
                            style="background-color: #3e0a42; color: white; border: none; padding: 5px 10px;"
                            {% if x.status == "Confirmed" %}disabled{% endif %}>
                            Accept
                        </button>
                        <button type="submit" name="status" value="Cancelled" 
                            style="background-color: #3e0a42; color: white; border: none; padding: 5px 10px;"
                            {% if x.status == "Confirmed" %}disabled{% endif %}>
                            Cancel
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

                <button id="popup-trigger"  class="floating-button">
                    <i class="bi bi-plus"></i>
                </button>
                
            </div>
            
        </div>  
        
       
    </div>


<!-- modal for adding product  -->
<div id="product-pop-up" class="popup-container">
    <div class="popup-content">
        <span class="popup-close">&times;</span>
        <div class="product-page product-pop-up">
            <div class="row">
                <div class="col-md-6 col-sm-6 col-xs-3">
                    <div class="product-main-image">
                        <img id="image-preview" src="{{ uploaded_image_url|default:'https://via.placeholder.com/300' }}" alt="Uploaded Product Image" class="img-responsive" style="height: 300px; width: 300px;">
                    </div>
                    <div class="product-other-images">
                        <a href="javascript:;" class="active"><img  src="https://via.placeholder.com/50"></a>
                        <a href="javascript:;"><img alt="Berry Lace Dress" src="https://via.placeholder.com/50"></a>
                        <a href="javascript:;"><img alt="Berry Lace Dress" src="https://via.placeholder.com/50"></a>
                    </div>
                </div>
                <div class="col-md-6 col-sm-6 col-xs-9 customsize">
                    <form action="" method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                    <div class="form-floating mb-3" >
                        <input type="text" class="form-control" id="floatingInput" placeholder="name@example.com"name="productname" required>
                        <label for="floatingInput">Product Name</label>
                    </div>
                    <div class="input-group mb-3">
                        <input type="file" class="form-control" id="inputGroupFile02" name="image" onchange="previewImage(event)">
                        <label class="input-group-text" for="inputGroupFile02"required>Upload</label>
                    </div>
                    <div class="form-floating mb-3" >
                        <input type="text" class="form-control" id="floatingcolor" placeholder="price" name="price">
                        <label for="floatingcolor"required>Price</label>
                    </div>
                    <div class="form-floating mb-3 " >
                        <input type="textarea" class="form-control" id="floatingsize" placeholder="Description" name="description" >
                        <label for="floatingsize"required>Description</label>
                    </div>
                    <div class="form-floating mb-3">
                        <select id="dropdown" style="width: 368px;height:50px;border-radius: 5px;" name="category">
                            {% for value,label in cate %}
                                <option value="{{ value }}">{{ label }}</option>
                            {% endfor %}
                           
                        </select>
                    </div>
                   
                    <div class="product-page-cart">
                        <button class="btn btn-primary" type="submit">Save</button>
                        <a href="#" class="btn btn-default">More details</a>
                    </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // JavaScript to handle popup functionality
document.addEventListener("DOMContentLoaded", function () {
    const popupTrigger = document.getElementById("popup-trigger");
    const popup = document.getElementById("product-pop-up");
    const popupClose = document.querySelector(".popup-close");

    // Show popup
    popupTrigger.addEventListener("click", function () {
        popup.style.display = "flex"; // Use flex for centering
    });

    // Close popup
    popupClose.addEventListener("click", function () {
        popup.style.display = "none";
    });

    // Close popup when clicking outside the content
    window.addEventListener("click", function (event) {
        if (event.target === popup) {
            popup.style.display = "none";
        }
    });
});

</script>

<script>
    function previewImage(event) {
        const fileInput = event.target;
        const preview = document.getElementById('image-preview'); // Main image
        const thumbnail = document.getElementById('image-preview-thumbnail'); // Thumbnail (optional)

        if (fileInput.files && fileInput.files[0]) {
            const reader = new FileReader();

            reader.onload = function (e) {
                // Set the preview image source to the file content
                preview.src = e.target.result;
                thumbnail.src = e.target.result; // Optional thumbnail preview
            };

            reader.readAsDataURL(fileInput.files[0]);
        }
    }
</script>







  </body>
  </html>